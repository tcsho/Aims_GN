
<!DOCTYPE html>
<html>
<head>
    <title>Class Wise Report</title>
    <!--<script src="jquery-1.10.2.js" type="text/JavaScript" language="javascript"></script>-->
    <!--PWA-->
    <link rel="manifest" href="./Content/manifest.json">
    <link rel="shortcut icon" href="./Content/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./Content/images/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./Content/images/icons/favicon-32x32.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="PWA Splash">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-1668x2224.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./Content/images/splash/launch-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-icon" sizes="180x180" href="./Content/images/icons/apple-touch-icon.png">
    <link rel="mask-icon" href="./Content/images/icons/safari-pinned-tab.svg" color="#6F6F6F">
    <!--PWA-->

    <script src="jquery-3.3.1.min.js" type="text/JavaScript" language="javascript"></script>
    <script src="jquery-ui-1.10.4.custom.js"></script>
    <script src="jquery.PrintArea.js" type="text/JavaScript" language="javascript"></script>

    <link type="text/css" rel="stylesheet" href="css/ui-lightness/jquery-ui-1.10.4.custom.css" />

    <link type="text/css" rel="stylesheet" href="PrintArea3.css" />                <!-- Y : rel is stylesheet and media is in [all,print,empty,undefined] -->
    <link type="text/css" rel="stylesheet" href="media_all.css" media="all" />   <!-- Y : rel is stylesheet and media is in [all,print,empty,undefined] -->
    <link type="text/css" rel="" href="empty.css" />                    <!-- N : rel is not stylesheet -->
    <link type="text/css" rel="noPrint" href="noPrint.css" />                  <!-- N : rel is not stylesheet -->
    <link type="text/css" rel="stylesheet" href="media_none.css" media="xyz" />   <!-- N : media not in [all,print,empty,undefined] -->
    <link type="text/css" href="no_rel.css" media="print" /> <!-- N : no rel attribute -->
    <link type="text/css" href="no_rel_no_media.css" /> <!-- N : no rel, no media attributes -->
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <!--<link rel="stylesheet" type="text/css"  href="bootstrap/css/bootstrap.css.map">-->

    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="sweetalert2.min.css">
    <script type="text/javascript" src="sweetalert2.min.js"></script>
    <script type="text/javascript" src="qr-code.js"></script>
</head>
<body>
    <div class="container">
        <div class="overlay"></div>
        <div class="row printview">
            <div class="button b1 btn btn-primary  tooltip "><i class="fa fa-print" data-toggle="tooltip" data-placement="bottom" title="Print"></i><span class="tooltiptext">Print</span></div>
        </div>


        <div class="PrintArea area1 all" id="Retain">
            <!--boostrap-->

            <div class="container" id="printtable">
                <!--noticeborder-->
                <!--serachprinttable-->
                <!--container-->

               

                    <!--section 1--->
                    <!--<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 displayflex">
        <p><span class="headerstudentname"></span><span class="floatright headerstudentcenter"></span></p>
        <!--visiblity-hidden_mediaclass-->
                    <!--<div id="qrcode"></div>
                </div>-->
                    

                    <!--section 1--->
                    <!--section 2--->


                    
                    <!--section 2--->
                    <!--section 2--->


                    
                    <!--section 2--->
                    <!--Section4-->


                
                <!--section4-->



            </div>
        </div>

        <!--bootsrap-->
    </div>


    <div style="border: solid 2px #999fff; float: left; margin-left: 20px;" class="SettingsBox">
        <div style="width: 400px; padding: 20px;">
            <div style="padding: 0 10px 10px;" class="buttonBar">
                <div class="button b1">Print</div>
                <div class="toggleDialog">open dialog</div>
            </div>

            <div style="font-weight: bold; border-top: solid 1px #999fff; padding-top: 10px;">Settings</div>
            <table>
                <tbody>
                    <tr>
                        <td><input value="popup" name="mode" id="popup" checked="" type="radio"> Popup</td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;"><input value="popup" name="popup" id="closePop" type="checkbox"> Close popup</td>
                    </tr>
                    <tr>
                        <td><input value="iframe" name="mode" id="iFrame" type="radio"> IFrame</td>
                    </tr>
                    <tr>
                        <td>Extra css: <input type="text" name="extraCss" size="50" /></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="settingName">Print area:</div>
                            <div class="settingVals">
                                <input type="checkbox" class="selPA" value="area1" checked /> Area 1<br>
                                <input type="checkbox" class="selPA" value="area2" checked /> Area 2<br>
                                <input type="checkbox" class="selPA" value="area3" checked /> Area 3<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="settingName">Retain Attributes:</div>
                            <div class="settingVals">
                                <input type="checkbox" checked name="retainCss" id="retainCss" class="chkAttr" value="class" /> Class
                                <br>
                                <input type="checkbox" checked name="retainId" id="retainId" class="chkAttr" value="id" /> ID
                                <br>
                                <input type="checkbox" checked name="retainStyle" id="retainId" class="chkAttr" value="style" /> Style
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="padding: 3px; border: solid 1px #ddd;">
                                Add to head :
                                <input type="checkbox" checked name="addElements" id="addElements" class="chkAttr" />
                                <pre>&lt;meta charset="utf-8" /&gt;<br>&lt;http-equiv="X-UA-Compatible" content="IE=edge"/&gt;</pre>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>



        <footer>okss</footer>
    </div>

    <script>
        $(document).ready(function () {
            $(".overlay").show();


            $('[data-toggle="tooltip"]').tooltip();
            var dialog = $("div.testDialog").dialog({ position: { my: "left top", at: "left bottom+50", of: ".SettingsBox" }, width: "1000", title: "Print Dialog Box Contents" });

            $(".toggleDialog").click(function () {
                dialog.dialog("open");
            });

            $("div.b1").click(function () {

                var mode = $("input[name='mode']:checked").val();
                var close = mode == "popup" && $("input#closePop").is(":checked");
                var extraCss = $("input[name='extraCss']").val();

                var print = "";
                $("input.selPA:checked").each(function () {
                    print += (print.length > 0 ? "," : "") + "div.PrintArea." + $(this).val();
                });

                var keepAttr = [];
                $(".chkAttr").each(function () {
                    if ($(this).is(":checked") == false)
                        return;

                    keepAttr.push($(this).val());
                });

                var headElements = $("input#addElements").is(":checked") ? '<meta charset="utf-8" />,<meta http-equiv="X-UA-Compatible" content="IE=edge"/>' : '';

                var options = { mode: mode, popClose: close, extraCss: extraCss, retainAttr: keepAttr, extraHead: headElements };

                $(print).printArea(options);




            });

            /****Disabled f12 and right click key***/

            //$(document).keydown(function(event){
            //        if(event.keyCode==123){
            //            return false;
            //        }
            //        else if (event.ctrlKey && event.shiftKey && event.keyCode==73){
            //                 return false;
            //        }
            //    });

            //    $(document).on("contextmenu",function(e){
            //       e.preventDefault();
            //    });
            /****Disabled f12 and right click key***/

            var uri = window.location.href;
            var enc = encodeURIComponent(uri).replace('%27', '+');
            var dec = decodeURIComponent(enc);
            var sURLVariableswithurl = "";
            function GetUrlParameter(sParam) {
                var sPageURL = dec;//window.location.search.substring(1);

                sURLVariableswithurl = sPageURL.split('?');
                var sURLVariables = sURLVariableswithurl[1].split('&');

                for (var i = 0; i < sURLVariables.length; i++) {
                    var sParameterName = sURLVariables[i].split('=');

                    if (sParameterName[0] == sParam) {
                        return sParameterName[1];
                    }
                }
            }

            var Center_Id = GetUrlParameter('Center_Id');
            var Session_Id = GetUrlParameter('Session_Id');
            var TermGroup_Id = GetUrlParameter('TermGroup_Id');
            var Class_Id = GetUrlParameter('Class_Id');
            //var Section_Id = GetUrlParameter('Section_Id');
             var Block_Id = GetUrlParameter('Block_Id');
            //console.log("Center Id" + Center_Id + "TermGroup_Id" + TermGroup_Id + "------" + "Session_Id" + Session_Id);
            var class_wiselist = "";
            var srno = 1;
            var count = 1;
              var alreadyt = 0;

            var  Sectionarray = [];
             Sectionarray.length = 0;
            var datademo = [];
            datademo.length = 0;
            $.ajax({
                type: 'GET',
                data: { Center_Id: Center_Id, Session_Id: Session_Id, TermGroup_Id: TermGroup_Id, Class_Id: Class_Id,Block_Id:Block_Id },
                url: 'http://localhost:52673/api/Setup/SeatPlanAllocatedStudentsRoomsShow',//sURLVariableswithurl[0]+"?",//getsearchedpatient
                success: function (result) {
                    if (result == null || result == "" || result == " ") {
                          Swal.fire(
                                'No Data',
                                '',
                                'error'
                            )
                        return;
                    }
                    //console.log("esult" + JSON.stringify(result));
                    for (var tr = 0; tr < result.length; tr++) {
                        //var cls = result[0].Class_Name;
                        //$(".class_name").val(cls);
                        //$(".blockiname").val(result[0].BlockName + " / " + result[0].Gender);
                      

                       if (alreadyt != result[tr].Section_Id) {
                            /**FIRST tIME USER**/
                            if (alreadyt == 0) {
                                Sectionarray.push({

                                   StudentERPNo: result[tr].StudentERPNo,
                                  StudentMaskNo: result[tr].StudentMaskNo,
                                 First_Name: result[tr].First_Name,
                                  Room_Id: result[tr].Room_Id
                                });

                                datademo.push({
                                    Center_Name: result[tr].Center_Name,
                                     TermGroup_Id: result[tr].TermGroup_Id,
                                    Class_Name: result[tr].Class_Name,
                                    BlockName: result[tr].BlockName,
                                    Gender:result[tr].Gender,
                                  Section_Id: result[tr].Section_Id,
                                    Section_Name: result[tr].Section_Name,
                                    Sectionwise:Sectionarray

                                });
                                alreadyt = result[tr].Section_Id;
                            }
                            /**FIRST tIME USER**/

                            else {
                               Sectionarray = [];
                                Sectionarray.push({

                                    StudentERPNo: result[tr].StudentERPNo,
                                    StudentMaskNo: result[tr].StudentMaskNo,
                                   First_Name: result[tr].First_Name,
                                   Room_Id: result[tr].Room_Id

                                });

                                datademo.push({
                                    Center_Name: result[tr].Center_Name,
                                     TermGroup_Id: result[tr].TermGroup_Id,
                                    Class_Name: result[tr].Class_Name,
                                    BlockName: result[tr].BlockName,
                                    Gender:result[tr].Gender,
                                  Section_Id: result[tr].Section_Id,
                                    Section_Name: result[tr].Section_Name,
                                    Sectionwise:Sectionarray

                                });
                                alreadyt = result[tr].Section_Id;
                            }
                        }
                        else {
                            Sectionarray.push({

                                 StudentERPNo: result[tr].StudentERPNo,
                                    StudentMaskNo: result[tr].StudentMaskNo,
                                   First_Name: result[tr].First_Name,
                                   Room_Id: result[tr].Room_Id

                            });
                        }

                    }
                    //console.log("Data" + JSON.stringify(datademo));
                    for (var i = 0; i < datademo.length; i++)
                    {
                        class_wiselist += '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding innerdiv">';
                        /**SECTION 1**/
                        class_wiselist += '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 sec1 article noticesec1">';

                        class_wiselist += '<div class="row rowdisplayflex headerwithlogo">';
                            class_wiselist += '<div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 visiblity-hidden_mediaclass">';
                                
                            class_wiselist += '</div>';
                            class_wiselist += '<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-mediaalign">';
                                class_wiselist += '<h4 class="visiblity-hidden_mediaclass">Report Card 2020-2021</h4>';
                                class_wiselist += '<h2 class="schoolname">The City School</h2>';
                                class_wiselist += '<h6>Southern Region</h6>';
                                class_wiselist += '<h5>Class Wise Student Sheet</h5>';
                            class_wiselist += '</div>';
                            class_wiselist += '<div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-right schoollogo">';
                               class_wiselist += '<img src="images/logo.png" style="margin-top: 25px" />';
                            class_wiselist += '</div>';
                        class_wiselist += '</div>';

                    class_wiselist += '</div>';
                    /**SECTION 1**/
                    /***SECTION 2**/
                        class_wiselist += '<div class="row adarticle noticesec2 attendesec1">';
                        class_wiselist += '<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 inputflex">';
                            class_wiselist += '<div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 no-padding"><label class="flexlabel">Name Of School:</label></div>';
                            class_wiselist += '<div class="col-lg-8 col-md-8 col-sm-8 col-xs-6 no-padding">';
                                class_wiselist += '<input type="text" class="form-control onlybottomborder center-nametxt" value="'+datademo[i].Center_Name+'"/>';
                            class_wiselist += '</div>';
                        class_wiselist += '</div>';
                        class_wiselist += '<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 inputflex">';
                            class_wiselist += '<div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 no-padding"><label class="flexlabel">Name Of Examination:</label></div>';
                        class_wiselist += '<div class="col-lg-8 col-md-8 col-sm-8 col-xs-6 no-padding">';
                        if (datademo[i].TermGroup_Id == 1) {
                              class_wiselist += '<input type="text" class="form-control onlybottomborder term-nametxt" value="First Term"/>';
                        }
                        else if (datademo[i].TermGroup_Id == 2) {
                           class_wiselist += '<input type="text" class="form-control onlybottomborder term-nametxt" value="Second Term"/>';
                        }   
                        class_wiselist += '</div>';
                        class_wiselist += '</div>';
                        class_wiselist += '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 inputflex">';
                            class_wiselist += '<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding inputflex" style="text-align: center;display: block;">';
                                class_wiselist += '<label class="flexlabel">Class:</label>';
                                class_wiselist += '<input type="text" class="onlybottomborder class_name classwisename text-center" value="'+datademo[i].Class_Name+'"/>';
                            class_wiselist += '</div>';
                            class_wiselist += '<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 no-padding inputflex" style="text-align: center;display: block;">';
                                class_wiselist += '<label class="flexlabel">Block / Gender</label>';
                                class_wiselist += '<input type="text" class="onlybottomborder blockiname text-center" value="'+datademo[i].BlockName+" / "+ datademo[i].Gender+'"/>';
                            class_wiselist += '</div>';
                        class_wiselist += '</div>';
                    class_wiselist += '</div>';
                        /**SECTION 2**/
                        class_wiselist += '<h5 style="text-align: center;border: 1px solid #000;background: #f8f9fa;padding: 2px 0px;margin-top: 10px;">' + "Section " + datademo[i].Section_Name + '</h5>';
                        class_wiselist += '<div class="row adarticle attendesec2">';

                        class_wiselist += '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 attend2subsec1 tablesec">';
                           

                       


                        class_wiselist += '<table class="table table-bordered class_wisetable">';
                                class_wiselist += '<thead>';
                                class_wiselist += '<th>Sr. #</th>';
                                class_wiselist += '<th>ERP #</th>';
                                class_wiselist += '<th>Exam Roll  #</th>';
                                class_wiselist += '<th>Student Name</th>';
                                class_wiselist += '<th>Examination Room #</th>';
                               
                                class_wiselist += '</thead>';


                        class_wiselist += '<tbody>';
                        for (var ty = 0; ty < datademo[i].Sectionwise.length; ty++) {
                              var srno = ty + 1;
                            class_wiselist += '<tr>';
                            class_wiselist += '<td>' + srno + '</td>';
                            class_wiselist += '<td>' + datademo[i].Sectionwise[ty].StudentERPNo + '</td>';
                            class_wiselist += '<td>' + datademo[i].Sectionwise[ty].StudentMaskNo + '</td>';
                            class_wiselist += '<td>' + datademo[i].Sectionwise[ty].First_Name + '</td>';
                            class_wiselist += '<td>' + datademo[i].Sectionwise[ty].Room_Id + '</td>';
                            
                            class_wiselist += '</tr>';
                            }
                            class_wiselist += '</tbody>';
                        
                        class_wiselist += '</table>';
                        class_wiselist += '</div>';
                        class_wiselist += '</div>';
                        class_wiselist += '</div>';/**innerdiv**/
                        if (i != datademo.length - 1) {//this condition is for last page of pdf no page break after that
                            class_wiselist += '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pagecut printmediaborderbottom pehlewala"></div>';
                        }
                    
                        class_wiselist += '<span style="visibility:hidden">'+"Page "+(i+1)+'</span>';


                        
                    }
                    //$(".center-nametxt").val(result[0].Center_Name);
                    //if (TermGroup_Id == 1) {
                    //    $(".term-nametxt").val("First Term");
                    //}
                    //else if (TermGroup_Id == 2) {
                    //    $(".term-nametxt").val("Second Term");
                    //}
                    $("#printtable").html(class_wiselist)
                }, complete: function () {

                    $(".overlay").hide();
                    $('.container').on('scroll touchmove mousewheel');
                }, error: function (err) {

                    console.log(JSON.stringify(err));

                }
            });





            const months = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];

            /**Format Date**/
            function formatdate(datevalue) {
                var date = new Date(datevalue);
                var datess = date.getDate();
                var monthss = months[date.getMonth()];
                var fullyear = date.getFullYear();
                var hours = date.getHours();
                var minutes = date.getMinutes();
                var mili = date.getMilliseconds();

                var strdate = monthss + "  " + datess + ", " + fullyear;
                return strdate;
            }



            //const value = encodeURIComponent(value).replace('%20','+');

            var reportcard = "";
            var reportcard2 = "";
            //var Roll_Number="189570";
            //var Session_Id="11";
            //var Class_Id=13;



            $('.container').off('scroll touchmove mousewheel');





            //***PWA****/
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./Content/service-worker.js').then(res => {
                    //alert('SW register');
                }).catch(err => {
                    // alert("Error SW", err);
                })

            }
            else {
                console.log('SW Not supported');
            }
            //***PWA****/




        });//ready funtion









    </script>

    <style>
        .overlay {
            background: url('./images/logo2.gif') no-repeat center center; /*loader.gif*/
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            z-index: 9999999;
            background-color: rgba(0,0,0,0.5);
        }

        #serachprinttable {
            /*border: none;
        padding: 1px !important;
        height: 1000px !important;*/
            border: 1px solid #000 !important;
        }
    </style>
</body>
</html>