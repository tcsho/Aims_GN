<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table of Specification</title>
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/vendor/Fonts.css" />
    <link rel="stylesheet" href="assets/vendor/CustomStyle.css" />
    <link rel="stylesheet" href="assets/vendor/toastr.css" />
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.css" />
    <link href="assets/vendor/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--<script src="Content/jquery.js"></script>-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <link rel="stylesheet" href="node_modules/ng-select/ng-select/themes/default.theme.css">

    <!--Datatables-->

    <link rel="stylesheet" href="Content/DataTables/datatables.min.css" />
    <link href="Content/DataTables/Buttons-1.6.3/css/buttons.dataTables.min.css" rel="stylesheet" />


    <script src="Content/DataTables/Buttons-1.6.3/js/dataTables.buttons.min.js"></script>
    <script src="Content/DataTables/datatables.min.js"></script>


    <!--Datatables-->

    <link rel="stylesheet" href="node_modules/pnotify/core/dist/PNotify.css">
    <link rel="stylesheet" href="node_modules/pnotify/core/BrightTheme.css">
    <link href="Content/Header_Component.css" rel="stylesheet" />

    <link href="Content/Site.css" rel="stylesheet" />
    <link href="Content/sweetalert2.min.css" rel="stylesheet" />
    <script src="Content/jquery.limitText.js"></script>
</head>
<body>
    <!--HEADER COMPONENT-->
    <div class='overlay'></div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 BackgroundBlue">
                <div class="Gap"></div>
                <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
                        <img src="assets/images/logo1.png" class="ImageLayoutCenter" />
                    </div>
                    <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                        <div class="Gap"></div>
                        <div class="Gap"></div>
                        <p class="HeaderHeadingAMISPlus text-lg-left text-md-left text-sm-left text-xs-left text-center">The City School:	Southern Region</p>
                        <div class="row">
                            <nav class="navbar navbar-light navbar-expand-lg mainmenu">
                                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                    <ul class="navbar-nav mr-auto">
                                        <li><a href="#">Home <span class="sr-only">(current)</span></a></li>
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Results</a>
                                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                <li><a href="#">Result Card</a></li>
                                            </ul>
                                        </li>
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">TCS Reports</a>
                                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                <li class="dropdown">
                                                    <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Non Academic Reports</a>
                                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                        <li><a href="#">Non Academic Reports(RO)</a></li>
                                                        <li><a href="#">Non Academic Reports(CO)</a></li>
                                                    </ul>
                                                </li>
                                                <li class="dropdown">
                                                    <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Academic Reports</a>
                                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                        <li><a href="#">Academic Reports(CO)</a></li>
                                                        <li><a href="#">Academic Reports(RO)</a></li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>

                                        <li class="dropdown">
                                            <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Component Marks Setup</a>
                                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                <li><a href="Unit_Setup.html">Unit/Sub Unit Setup</a></li>
                                                <li><a href="Curriculum_Objectives.html">Curriculum Objectives Setup</a></li>
                                                <li><a href="Cl_Exam.html">CL Exam Setup</a></li>
                                                <li><a href="General_Comment_Section.html">Comments Setup</a></li>

                                            </ul>
                                        </li>

                                        <li class="dropdown">
                                            <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Exam Module</a>
                                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                <li><a href="Mark_Entry.aspx">Marks Entry</a></li>
                                                <li><a href="Progress_Report.html">Subject Progress Report</a></li>
                                                <li><a href="Progress_Report_Class.html">Class Progress Report</a></li>
                                                <li><a href="ExamDate.html">Exam DateSheet</a></li>
                                                <li><a href="Reports.aspx">Reports</a></li>
                                            </ul>
                                        </li>


                                        <!-- <li><a href="#">Service</a></li> -->
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
                    <!--<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 ">
                        <div class="Gap"></div>
                        <div class="Gap"></div>
                        <p class="HeaderHeadingSubmenu text-lg-right text-md-right text-center">
                            <a href="" class="LogoutButton">
                                Logout &nbsp;&nbsp;&nbsp;<i class="fa fa-sign-out" aria-hidden="true"></i>
                            </a>
                        </p>
                        <div class="Gap"></div>
                        <p class="HeaderHeadingSubmenu text-lg-right text-md-right text-center">
                            Logged in as: <span class="LoginAs"> Sr Exams</span>
                        </p>
                    </div>-->
                </div>
                <div class="Gap"></div>
            </div>
        </div>
    </div>
    <!--HEADER COMPONENT-->

    <div class="container body-content">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12" style="box-shadow: 0px 2px 4px -1px #00006a;padding: 7px 40px 40px 40px;">
                <p class="PageMainHeading"><i class="glyphicon glyphicon-folder-open" style="color: #00006a;"></i> &nbsp;&nbsp;Unit / Sub-Units Setup</p>
                <div style="background-color: #00006a;" class="Gap"></div>
                <ngx-spinner></ngx-spinner>
                <form class="form-horizontal product-setup-form custom-form unit_subunitform" autocomplete="off">
                    <p class="PageMainHeading"><span class="PageMainHeadingBorder"> <i class="glyphicon glyphicon-tags" style="color: #00006a;"></i> &nbsp;&nbsp;Header Setup &nbsp;&nbsp;&nbsp;</span> </p>
                    <!-- unitHeaderSetup Start -->
                    <div [formGroup]="unitGroup">
                        <div class="row">

                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                <span class="CustomLabel">Academic Year</span> <span class="RequiredLbl"> * </span><br>

                                <input type="text" class="form-control systopicsno visibilityhidden" />
                                <select class="AcademicYearList form-control">
                                </select>
                                <p class="error-message">* Academic Year Required</p>

                            </div>

                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                <span class="CustomLabel">Term</span> <span class="RequiredLbl"> * </span><br>

                                <select class="Term_list form-control">
                                    <option selected="true" disabled="disabled" value="">---Select---</option>
                                    <option value="1">First Term</option>
                                    <option value="2">Second Term</option>

                                </select>
                                <p class="error-message">* Term Required</p>
                            </div>

                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">

                                <span class="CustomLabel">Class</span> <span class="RequiredLbl"> * </span>
                                <select class="Class_list form-control">
                                </select>
                                <p class="error-message">* Class Required</p>
                            </div>

                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                <span class="CustomLabel">Subject</span> <span class="RequiredLbl"> * </span><br>

                                <select class="Subject_list form-control">
                                </select>
                                <p class="error-message">* Subject Required</p>
                            </div>
                        </div>






                        <!-- unitGroup Start -->
                        <div class="row">

                            <div class="col-sm-12">


                                <button type="button" class=" btn  btn-primary saveunit savebtn" id="saveunit">Show</button>




                            </div>







                        </div>
                    </div>
                </form>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 table-scroll fabricselling_loader detaildiv nopadding">

                    <table class="table table-striped  table-bordered table-sm row-border hover grid_table fabricbuyingtable customdatatablestyle table_withoutscroll detail-list">
                        <thead class="custththead">
                            <tr role="row">

                                <th>Question Number</th>
                                <th>Question Part</th>
                                <th>Maximum marks</th>
                                <th>Difficulty level</th>
                                <th>Cognitive level</th>
                                <th>Type</th>
                                <th>Topic/Unit</th>
                                <th>Objective</th>
                            </tr>
                        </thead>


                        <tbody style="border-top-color: #367fa9">
                        </tbody>
                    </table>
                </div>


                <div class="col-sm-12" hidden>
                    <ul class="pager ps-action-btn" style="float: right;margin: 10px 0px 0px 0px;">
                        <li class="pagerButton">
                            <a (click)="SubmitData()" class="pagerButton">Submit</a>
                        </li>&nbsp;&nbsp;&nbsp;
                    </ul>
                </div>
            </div>
        </div>

        <hr />
        <footer>
            <p>&copy; 2021 - The City School</p>
        </footer>
    </div>

    <!-- Main Page End   -->


    <script>
        var updateflag = 0;
        /********DROPDOWN*****/
        $(".overlay").hide();
        var AcademicYearList = "";
        $.ajax({
            type: 'GET',
            //data:,
            url: 'http://localhost:52673/api/Setup/AcademicYearDropDown',//sURLVariableswithurl[0]+"?",//getsearchedpatient
            success: function (result) {
                AcademicYearList += '<option selected="true" disabled="disabled" value="">---Select---</option>';

                for (var i = 0; i < result.length; i++) {


                    AcademicYearList += '<option value="' + result[i].Session_Id + '">' + result[i].Description + '</option>';


                }
                $(".AcademicYearList").html(AcademicYearList);

            }
        });


        var Class_list = "";
        $.ajax({
            type: 'GET',
            //data:,
            url: 'http://localhost:52673/api/Setup/ClassDropDown',//sURLVariableswithurl[0]+"?",//getsearchedpatient
            success: function (result) {
                Class_list += '<option selected="true" disabled="disabled" value="">---Select---</option>';
                for (var i = 0; i < result.length; i++) {
                    Class_list += '<option value="' + result[i].Class_Id + '">' + result[i].Class_Name + '</option>';
                }
                $(".Class_list").html(Class_list);

            }
        });

        $(".Class_list").change(function () {


            var classId = $(this).val();

            var Subject_list = "";
            $.ajax({
                type: 'GET',
                data: { classId: classId },
                url: 'http://localhost:52673/api/Setup/SubjectByClassIdDropDown',//sURLVariableswithurl[0]+"?",//getsearchedpatient
                success: function (result) {
                    Subject_list += '<option selected="true" disabled="disabled" value="">---Select---</option>';
                    for (var i = 0; i < result.length; i++) {
                        Subject_list += '<option value="' + result[i].Subject_Id + '">' + result[i].Subject_Name + '</option>';
                    }
                    $(".Subject_list").html(Subject_list);

                }
            });
        });
        /********DROPDOWN*****/




        /********************VALIDATION*******************/
        var AcademicYearListvalidation;
        var TermListvalidation;
        var ClassListvalidation;
        var SubjectListvalidation;
        var Unit_Namevalidation;
        function onlytthreefieldvali() {
            AcademicYearListvalidation = $('.AcademicYearList').val();
            TermListvalidation = $('.Term_list').val();
            ClassListvalidation = $('.Class_list').val();

            $('.AcademicYearList').change("select", function () {
                $('.AcademicYearList').next(".error-message").hide();
                $('.AcademicYearList').css('border', 'none');
                $('.AcademicYearList').css('background', '#d8f9d8');
            });
            if (AcademicYearListvalidation == null || AcademicYearListvalidation == undefined || AcademicYearListvalidation == "" || AcademicYearListvalidation == " ") {
                $('.AcademicYearList').next(".error-message").text("* Academic Year Required");
                $('.AcademicYearList').next(".error-message").show();
                $('.AcademicYearList').css('border', '1px solid red');
                $('.AcademicYearList').css('background', '#fff');
                $('.AcademicYearList').focus();
                return false;
            }
            $('.Term_list').change("select", function () {
                $('.Term_list').next(".error-message").hide();
                $('.Term_list').css('border', 'none');
                $('.Term_list').css('background', '#d8f9d8');
            });
            if (TermListvalidation == null || TermListvalidation == undefined || TermListvalidation == "" || TermListvalidation == " ") {
                $('.Term_list').next(".error-message").text("* Term Required");
                $('.Term_list').next(".error-message").show();
                $('.Term_list').css('border', '1px solid red');
                $('.Term_list').css('background', '#fff');
                $('.Term_list').focus();
                return false;
            }
            $('.Class_list').change("select", function () {
                $('.Class_list').next(".error-message").hide();
                $('.Class_list').css('border', 'none');
                $('.Class_list').css('background', '#d8f9d8');
            });
            if (ClassListvalidation == null || ClassListvalidation == undefined || ClassListvalidation == "" || ClassListvalidation == " ") {
                $('.Class_list').next(".error-message").text("* Class Required");
                $('.Class_list').next(".error-message").show();
                $('.Class_list').css('border', '1px solid red');
                $('.Class_list').css('background', '#fff');
                $('.Class_list').focus();
                return false;
            }


        }

        function validation() {
            AcademicYearListvalidation = $('.AcademicYearList').val();
            TermListvalidation = $('.Term_list').val();
            ClassListvalidation = $('.Class_list').val();
            SubjectListvalidation = $('.Subject_list').val();

            $('.AcademicYearList').change("select", function () {
                $('.AcademicYearList').next(".error-message").hide();
                $('.AcademicYearList').css('border', 'none');
                $('.AcademicYearList').css('background', '#d8f9d8');
            });
            if (AcademicYearListvalidation == null || AcademicYearListvalidation == undefined || AcademicYearListvalidation == "" || AcademicYearListvalidation == " ") {
                $('.AcademicYearList').next(".error-message").text("* Academic Year Required");
                $('.AcademicYearList').next(".error-message").show();
                $('.AcademicYearList').css('border', '1px solid red');
                $('.AcademicYearList').css('background', '#fff');
                $('.AcademicYearList').focus();
                return false;
            }
            $('.Term_list').change("select", function () {
                $('.Term_list').next(".error-message").hide();
                $('.Term_list').css('border', 'none');
                $('.Term_list').css('background', '#d8f9d8');
            });
            if (TermListvalidation == null || TermListvalidation == undefined || TermListvalidation == "" || TermListvalidation == " ") {
                $('.Term_list').next(".error-message").text("* Term Required");
                $('.Term_list').next(".error-message").show();
                $('.Term_list').css('border', '1px solid red');
                $('.Term_list').css('background', '#fff');
                $('.Term_list').focus();
                return false;
            }
            $('.Class_list').change("select", function () {
                $('.Class_list').next(".error-message").hide();
                $('.Class_list').css('border', 'none');
                $('.Class_list').css('background', '#d8f9d8');
            });
            if (ClassListvalidation == null || ClassListvalidation == undefined || ClassListvalidation == "" || ClassListvalidation == " ") {
                $('.Class_list').next(".error-message").text("* Class Required");
                $('.Class_list').next(".error-message").show();
                $('.Class_list').css('border', '1px solid red');
                $('.Class_list').css('background', '#fff');
                $('.Class_list').focus();
                return false;
            }

            $('.Subject_list').on("input", function () {
                $('.Subject_list').next(".error-message").hide();
                $('.Subject_list').css('border', 'none');
                $('.Subject_list').css('background', '#d8f9d8');
            });
            if (SubjectListvalidation == null || SubjectListvalidation == undefined || SubjectListvalidation == "" || SubjectListvalidation == " ") {
                $('.Subject_list').next(".error-message").text("* Subject Required");
                $('.Subject_list').next(".error-message").show();
                $('.Subject_list').css('border', '1px solid red');
                $('.Subject_list').css('background', '#fff');
                $('.Subject_list').focus();
                return false;
            }



        }
        /*******************VALIDATION********************/

        $("#saveunit").click(function () {
            //alert("ss");
            if (validation() == false) {

                return;
            }
            else {
                alert("ok");
                /****grid***/
                var Table_of_Specification_list = "";
                $.ajax({
                    type: 'GET',
                    data: { Session_Id: AcademicYearListvalidation, Subject_Id: SubjectListvalidation },
                    url: 'http://localhost:52673/api/Setup/Reportofspecification',//sURLVariableswithurl[0]+"?",//getsearchedpatient
                    success: function (result) {

                        for (var i = 0; i < result.length; i++) {

                            Table_of_Specification_list += '<tr>';
                            Table_of_Specification_list += '<td>' + result[i].Question_No + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].Question_Parts + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].Max_Marks_Question + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].Difficulty_Level + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].Cognitive_Lavel + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].ObjSubId + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].Topic_Name + '</td>';
                            Table_of_Specification_list += '<td>' + result[i].Objective_Name + '</td>';
                            Table_of_Specification_list += '</tr>';
                        }
                        $(".detail-list tbody").html(Table_of_Specification_list);
                        $('.detail-list').DataTable({
                            "dom": 'Blfrtip',
                            "bPaginate": true,
                            "bLengthChange": true,
                            "bFilter": true,
                            "bInfo": true,
                            "buttons": [
                                "copy", "excel", "pdf"
                            ],
                            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]

                        });
                    }
                });
                /**grid***/
            }
        });

        /*****RESET PARENT AND CHILD*********/

        function resetaddmodel() {
            $(".unit_subunitform input").val("");
            $(".unit_subunitform input").css("border:1px solid #ced4da;background:#fff;");
            $(".unit_subunitform select").val("");
            $(".unit_subunitform select").css("border:1px solid #ced4da;background:#fff;");
            $("#detailTableadd tbody").html("");


        }


    </script>
</body>
</html>